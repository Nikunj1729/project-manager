(this["webpackJsonpproject-manager"]=this["webpackJsonpproject-manager"]||[]).push([[0],{210:function(e,t,a){e.exports=a(412)},409:function(e,t,a){},412:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(81),i=a.n(c),o=a(5),l=a(83),s=a(17),u=a(85),m=a.n(u);a(400),a(404),a(406);m.a.initializeApp({apiKey:"AIzaSyAHvNnCsKwQbTyzb1Xc75DmyUt6gScVyOk",authDomain:"project-manager-6c4be.firebaseapp.com",databaseURL:"https://project-manager-6c4be.firebaseio.com",projectId:"project-manager-6c4be",storageBucket:"project-manager-6c4be.appspot.com",messagingSenderId:"484895120913",appId:"1:484895120913:web:ba2dc174d9a9f51b265bb0",measurementId:"G-55Y3DF3VQP"}),m.a.firestore();var d=m.a,f=a(33),p=a(208),h=a(6),E={authError:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(h.a)(Object(h.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("Login Success"),Object(h.a)(Object(h.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("Signout Success"),Object(h.a)(Object(h.a)({},e),{},{authError:null});case"SIGNOUT_ERROR":return console.log("Signout failed"),Object(h.a)(Object(h.a)({},e),{},{authError:"Signout failed"});case"SIGNUP_SUCCESS":return console.log("Signup Success"),Object(h.a)(Object(h.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("Signup failed"),Object(h.a)(Object(h.a)({},e),{},{authError:t.error.message});default:return e}},g={projects:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":return console.log("Created Project",t.project),e;case"CREATE_PROJECT_ERROR":return console.log("Created Project Error",t.error),e;default:return e}},N=Object(f.c)({auth:b,project:v,firebase:s.firebaseReducer,firestore:l.firestoreReducer}),j={},O=(a(409),a(8)),w=a(4),S=a(133),y=a.n(S),C=a(209),x=Object(o.b)(null,(function(e){return{signOut:function(){return e((function(e,t,a){a().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})})).catch((function(t){e({type:"SIGNOUT_ERROR",error:t})}))}))}}}))((function(e){var t=e.profile,a=e.signOut;return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(O.c,{to:"/create"},"New Project")),r.a.createElement("li",null,r.a.createElement("a",{href:"#",onClick:a},"Log out")),r.a.createElement("li",null,r.a.createElement(O.c,{to:"/",className:"btn btn-floating pink lighten-2"},t.initials)))})),R=function(){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(O.c,{to:"/signup"},"Signup")),r.a.createElement("li",null,r.a.createElement(O.c,{to:"/signin"},"Log in")))},k=Object(o.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,a=e.profile,n=t.uid?r.a.createElement(x,{profile:a}):r.a.createElement(R,null);return r.a.createElement("nav",{className:"nav-wrapper sapphire"},r.a.createElement("div",{className:"container"},r.a.createElement(O.b,{to:"/",className:"brand-logo"},"ProjectManager"),n))})),I=function(e){var t=e.project,a=t.title,n=t.content,c=t.authorFirstName,i=t.authorLastName;return r.a.createElement("div",{className:"card mercury z-depth-0 project-summary"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title white-text text-darken-3"},a),r.a.createElement("p",{className:"grey-text text-lighten-1"},"Posted by ",c," ",i),r.a.createElement("p",{className:"grey-text text-lighten-3"},n)))},P=function(e){var t=e.projects;return r.a.createElement("div",{className:"project-list section"},t&&t.map((function(e){return r.a.createElement(O.b,{to:"project/".concat(e.id),key:e.id},r.a.createElement(I,{project:e}))})))},U=a(84),F=a.n(U),L=function(e){var t=e.notifications;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0 mercury notification-container"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title white-text text-darken-3 "},"Notifications"),r.a.createElement("ul",{className:"notifications grey-text lighten-5"},t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("span",{className:"blue-text lighten-1"},e.user),r.a.createElement("span",{className:"white-text"}," ",e.content),r.a.createElement("div",{className:"grey-text note-date"},F()(e.time.toDate()).fromNow()))}))))))},_=Object(o.b)((function(e){return{auth:e.firebase.auth}}))((function(e){Object(s.useFirestoreConnect)([{collection:"projects",limit:6,orderBy:["createdAt","desc"]},{collection:"notifications",limit:3,orderBy:["time","desc"]}]);var t=Object(o.c)((function(e){return e.firestore.data.projects})),a=Object(o.c)((function(e){return e.firestore.data.notifications}));if(!e.auth.uid)return r.a.createElement(w.a,{to:"/signin"});if(!t)return null;var n=Object.keys(t).map((function(e){return Object(h.a)(Object(h.a)({},t[e]),{},{id:e})})),c=a?Object.keys(a).map((function(e){return Object(h.a)(Object(h.a)({},a[e]),{},{id:e})})):[];return r.a.createElement("div",{className:"dashboard container pt-80"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement(P,{projects:n})),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement(L,{notifications:c}))))}));var T=Object(o.b)((function(e){return{auth:e.firebase.auth}}))((function(e){var t=e.match.params.id;Object(s.useFirestoreConnect)(["projects"]);var a=Object(o.c)((function(e){return e.firestore.data.projects}));if(!e.auth.uid)return r.a.createElement(w.a,{to:"/signin"});if(!a)return null;var n=a[t];if(!n)return null;var c=n.title,i=n.content,l=n.authorFirstName,u=n.authorLastName,m=n.createdAt;return r.a.createElement("div",{className:"container section project-detail pt-80"},r.a.createElement("div",{className:"card mercury z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title white-text"},c),r.a.createElement("p",{className:"card-detail grey-text lighten-5"},i)),r.a.createElement("div",{className:"card-action gret lighten-4 grey-text"},r.a.createElement("div",null,"Posted by ",l," ",u),r.a.createElement("div",null,F()(m).calendar()))))})),A=a(18),G=Object(o.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createProject:function(t){return e(function(e){return function(t,a,n){var r=a().firebase.profile,c=a().firebase.auth.uid;n().firestore().collection("projects").add(Object(h.a)(Object(h.a)({},e),{},{authorFirstName:r.firstName,authorLastName:r.lastName,authorId:c,createdAt:(new Date).toDateString()})).then((function(){t({type:"CREATE_PROJECT",project:e})})).catch((function(e){t({type:"CREATE_PROJECT_ERROR",error:e})}))}}(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(A.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(""),l=Object(A.a)(o,2),s=l[0],u=l[1];if(!e.auth.uid)return r.a.createElement(w.a,{to:"/signin"});return r.a.createElement("div",{className:"container pt-80"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.createProject({title:c,content:s}),e.history.push("/")},className:"form mercury"},r.a.createElement("h5",{className:"white-text text-darken-3 padding-4"},"Create Project"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Title"),r.a.createElement("input",{type:"text",id:"title",autoComplete:"off",onChange:function(e){return i(e.target.value)},className:"white-text",value:c})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Content"),r.a.createElement("textarea",{type:"text",id:"content",autoComplete:"off",onChange:function(e){return u(e.target.value)},className:"white-text materialize-textarea",value:s})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn sapphire hover z-depth-0"},"Create"))))})),z=Object(o.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((a=t,function(e,t,n){n().auth().signInWithEmailAndPassword(a.email,a.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",error:t})}))}));var a}}}))((function(e){var t=Object(n.useState)(""),a=Object(A.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(""),l=Object(A.a)(o,2),s=l[0],u=l[1],m=e.authError;return e.auth.uid?r.a.createElement(w.a,{to:"/"}):r.a.createElement("div",{className:"container pt-80"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.signIn({email:s,password:c})},className:"form mercury"},r.a.createElement("h5",{className:"white-text text-darken-3 padding-4"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",autoComplete:"off",onChange:function(e){return u(e.target.value)},className:"white-text",value:s})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",autoComplete:"off",onChange:function(e){return i(e.target.value)},className:"white-text",value:c})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn sapphire hover z-depth-0"},"Login"),r.a.createElement("div",{className:"red-text center"},m?r.a.createElement("p",null,m):null))))})),D=Object(o.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError,profile:e.firebase.profile}}),(function(e){return{signUp:function(t){return e(function(e){return function(){var t=Object(C.a)(y.a.mark((function t(a,n,r){var c,i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r(),i=r().firestore(),t.prev=2,t.next=5,c.auth().createUserWithEmailAndPassword(e.email,e.password);case 5:o=t.sent,i.collection("users").doc(o.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]}).then((function(){console.log("Created"),a({type:"SIGNUP_SUCCESS"})})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:"SIGNUP_ERROR",error:t.t0});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(A.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(""),l=Object(A.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(""),d=Object(A.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)(""),E=Object(A.a)(h,2),b=E[0],g=E[1],v=e.auth,N=e.authError,j=e.profile;return v.uid&&!j.isEmpty?r.a.createElement(w.a,{to:"/"}):r.a.createElement("div",{className:"container pt-80"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.signUp({email:s,password:c,firstName:f,lastName:b})},className:"form mercury"},r.a.createElement("h5",{className:"white-text text-darken-3 padding-4"},"Sign Up"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",autoComplete:"off",onChange:function(e){return u(e.target.value)},className:"white-text",value:s})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",autoComplete:"off",onChange:function(e){return i(e.target.value)},className:"white-text",value:c})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"First Name"),r.a.createElement("input",{type:"text",id:"firstName",autoComplete:"off",onChange:function(e){return p(e.target.value)},className:"white-text",value:f})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",autoComplete:"off",onChange:function(e){return g(e.target.value)},className:"white-text",value:b})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn sapphire hover z-depth-0"},"Sign Up"),r.a.createElement("div",{className:"red-text center"},N?r.a.createElement("p",null,N):null))))}));var W=function(){return r.a.createElement(O.a,null,r.a.createElement("div",{className:"App black"},r.a.createElement(k,null),r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/",component:_}),r.a.createElement(w.b,{path:"/project/:id",component:T}),r.a.createElement(w.b,{path:"/signin",component:z}),r.a.createElement(w.b,{path:"/signup",component:D}),r.a.createElement(w.b,{path:"/create",component:G}))))},J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Q=Object(f.d)(N,j,Object(f.a)(p.a.withExtraArgument(s.getFirebase))),K={firebase:d,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:Q.dispatch,createFirestoreInstance:l.createFirestoreInstance},V=function(e){var t=e.children,a=Object(o.c)((function(e){return e.firebase.auth}));return Object(s.isLoaded)(a)?t:r.a.createElement("div",null,"Loading Screen...")};i.a.render(r.a.createElement(o.a,{store:Q},r.a.createElement(s.ReactReduxFirebaseProvider,K,r.a.createElement(V,null,r.a.createElement(W,null)))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");J?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):B(e)}))}}()}},[[210,1,2]]]);
//# sourceMappingURL=main.48c3c0d3.chunk.js.map